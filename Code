<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLM Token Count.com - Professional AI Tokenizer</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --bg-tertiary: #e9ecef;
            --text-primary: #212529;
            --text-secondary: #6c757d;
            --text-muted: #868e96;
            --border: #dee2e6;
            --accent: #000000;
            --accent-light: #495057;
            --shadow: rgba(0, 0, 0, 0.1);
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --info: #17a2b8;
        }
        [data-theme="dark"] {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2d2d2d;
            --bg-tertiary: #404040;
            --text-primary: #ffffff;
            --text-secondary: #b0b0b0;
            --text-muted: #8a8a8a;
            --border: #404040;
            --accent: #ffffff;
            --accent-light: #b0b0b0;
            --shadow: rgba(0, 0, 0, 0.3);
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            transition: all 0.3s ease;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            min-height: 100vh;
        }
        .header {
            background-color: var(--bg-secondary);
            border-bottom: 2px solid var(--border);
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .logo-icon {
            width: 40px;
            height: 40px;
            background-color: var(--accent);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--bg-primary);
            font-size: 18px;
        }
        .logo-text h1 {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 2px;
        }
        .logo-text p {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 500;
        }
        .header-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .view-mode-toggle {
            display: flex;
            background-color: var(--bg-tertiary);
            border-radius: 6px;
            padding: 4px;
            gap: 4px;
        }
        .mode-btn {
            background: none;
            border: none;
            padding: 8px 16px;
            cursor: pointer;
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 500;
            border-radius: 4px;
            transition: all 0.2s;
            white-space: nowrap;
        }
        .mode-btn:hover {
            background-color: var(--bg-secondary);
        }
        .mode-btn.active {
            background-color: var(--accent);
            color: var(--bg-primary);
        }
        .theme-toggle {
            background: none;
            border: 1px solid var(--border);
            border-radius: 4px;
            padding: 8px 12px;
            cursor: pointer;
            color: var(--text-primary);
            font-size: 14px;
            transition: all 0.2s;
        }
        .theme-toggle:hover {
            background-color: var(--bg-tertiary);
        }
        .main-content {
            padding: 30px;
            display: flex;
            flex-direction: column;
        }
        .content-section {
            margin-bottom: 30px;
        }
        .controls-section {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        .model-panel {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 24px;
        }
        .model-panel h3 {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
            color: var(--info);
            font-size: 16px;
        }
        .tooltip .tooltip-text {
            visibility: hidden;
            width: 280px;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            text-align: left;
            border-radius: 6px;
            padding: 12px;
            border: 1px solid var(--border);
            box-shadow: 0 4px 8px var(--shadow);
            position: absolute;
            z-index: 1000;
            bottom: 125%;
            left: 50%;
            margin-left: -140px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85rem;
            line-height: 1.4;
        }
        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
        .model-selector {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 4px;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            font-size: 14px;
            margin-bottom: 16px;
            cursor: pointer;
        }
        .model-info {
            background-color: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 4px;
            padding: 16px;
        }
        .model-info h4 {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-primary);
        }
        .model-info p {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }
        .model-specs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-top: 12px;
            font-size: 0.8rem;
        }
        .spec-item {
            background-color: var(--accent);
            color: var(--bg-primary);
            padding: 4px 8px;
            border-radius: 3px;
            font-weight: 500;
            text-align: center;
        }
        .model-rankings {
            margin-top: 12px;
            font-size: 0.8rem;
            color: var(--text-muted);
        }
        .stats-panel {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }
        .stat-card {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 24px;
            text-align: center;
            position: relative;
        }
        .stat-card h4 {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }
        .stat-number {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 4px;
        }
        .stat-label {
            font-size: 0.85rem;
            color: var(--text-muted);
            font-weight: 500;
        }
        .performance-warning {
            background: linear-gradient(135deg, var(--warning), #e6a200);
            color: white;
            padding: 12px 16px;
            border-radius: 6px;
            margin-top: 15px;
            font-size: 0.85rem;
            display: none;
        }
        .performance-warning.show {
            display: block;
        }
        .text-section {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 24px;
        }
        .text-section h3 {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .text-area {
            width: 100%;
            min-height: 350px;
            padding: 16px;
            border: 1px solid var(--border);
            border-radius: 4px;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            font-family: 'SF Mono', Monaco, Consolas, monospace;
            font-size: 14px;
            line-height: 1.5;
            resize: vertical;
        }
        .text-area:focus {
            outline: none;
            border-color: var(--accent);
        }
        .text-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid var(--border);
            flex-wrap: wrap;
            gap: 10px;
        }
        .text-stats-left {
            display: flex;
            gap: 20px;
            font-size: 0.85rem;
            color: var(--text-secondary);
            flex-wrap: wrap;
        }
        .estimation-info {
            font-size: 0.85rem;
            color: var(--text-muted);
        }
        .advanced-stats-section {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 24px;
            margin-top: 30px;
        }
        .advanced-stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }
        .advanced-stat-item {
            background-color: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 16px;
        }
        .advanced-stat-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }
        .advanced-stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent);
        }
        .advanced-stat-detail {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 4px;
        }
        .keyword-density-section {
            margin-top: 24px;
        }
        .keyword-density-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            border-bottom: 2px solid var(--border);
        }
        .keyword-tab {
            background: none;
            border: none;
            padding: 10px 16px;
            cursor: pointer;
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-weight: 500;
            border-bottom: 2px solid transparent;
            margin-bottom: -2px;
            transition: all 0.2s;
        }
        .keyword-tab.active {
            color: var(--accent);
            border-bottom-color: var(--accent);
        }
        .keyword-tab:hover {
            background-color: var(--bg-tertiary);
        }
        .keyword-list {
            background-color: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 16px;
            max-height: 300px;
            overflow-y: auto;
        }
        .keyword-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            margin-bottom: 6px;
            background-color: var(--bg-secondary);
            border-radius: 4px;
            font-size: 0.85rem;
        }
        .keyword-item:hover {
            background-color: var(--bg-tertiary);
        }
        .keyword-text {
            font-weight: 500;
            color: var(--text-primary);
            flex: 1;
        }
        .keyword-count {
            color: var(--text-secondary);
            margin-right: 12px;
        }
        .keyword-percent {
            background-color: var(--accent);
            color: var(--bg-primary);
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        .no-keywords {
            text-align: center;
            color: var(--text-muted);
            padding: 20px;
            font-size: 0.85rem;
        }
        .cost-info {
            background-color: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 12px;
            margin-top: 15px;
            font-size: 0.85rem;
        }
        .cost-info h5 {
            color: var(--text-primary);
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        .cost-info p {
            color: var(--text-secondary);
            margin-bottom: 4px;
        }
        .comparison-section {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 24px;
            margin-top: 30px;
        }
        .comparison-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .comparison-header h3 {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .add-model-btn {
            background-color: var(--accent);
            color: var(--bg-primary);
            border: none;
            border-radius: 4px;
            padding: 8px 16px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.2s;
        }
        .add-model-btn:hover {
            opacity: 0.8;
        }
        .add-model-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .comparison-grid {
            display: grid;
            gap: 16px;
        }
        .comparison-row {
            background-color: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 16px;
            position: relative;
        }
        .comparison-row.selected {
            border-color: var(--accent);
            box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);
        }
        .model-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        .model-info-compact {
            flex: 1;
        }
        .model-info-compact h4 {
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }
        .model-info-compact p {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        .model-rank {
            background-color: var(--accent);
            color: var(--bg-primary);
            padding: 4px 8px;
            border-radius: 3px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        .remove-btn {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 4px;
            border-radius: 3px;
            font-size: 14px;
            margin-left: 8px;
        }
        .remove-btn:hover {
            color: var(--danger);
            background-color: var(--bg-tertiary);
        }
        .metrics-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }
        .metric-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .metric-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .metric-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            font-weight: 500;
        }
        .metric-value {
            font-size: 0.9rem;
            color: var(--text-primary);
            font-weight: 600;
        }
        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: var(--bg-tertiary);
            border-radius: 4px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background-color: var(--accent);
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        .cost-bar .progress-fill {
            background: linear-gradient(90deg, #28a745 0%, #ffc107 50%, #dc3545 100%);
        }
        .context-bar .progress-fill {
            background: linear-gradient(90deg, #17a2b8 0%, #ffc107 70%, #dc3545 100%);
        }
        .model-selector-dropdown {
            position: relative;
            display: inline-block;
        }
        .model-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background-color: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 4px;
            box-shadow: 0 4px 12px var(--shadow);
            max-width: 280px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }
        .model-dropdown.active {
            display: block;
        }
        .model-dropdown-option {
            display: block;
            width: 100%;
            padding: 10px 12px;
            border: none;
            background: none;
            text-align: left;
            color: var(--text-primary);
            cursor: pointer;
            font-size: 13px;
            transition: background-color 0.2s;
        }
        .model-dropdown-option:hover {
            background-color: var(--bg-secondary);
        }
        .model-dropdown-option:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        @media (max-width: 968px) {
            .controls-section {
                grid-template-columns: 1fr;
            }
            
            .stats-panel {
                grid-template-columns: 1fr;
            }
        }
        @media (max-width: 768px) {
            .header {
                padding: 15px 20px;
                flex-direction: column;
                gap: 15px;
            }
            
            .header-controls {
                width: 100%;
                justify-content: space-between;
            }
            
            .view-mode-toggle {
                flex: 1;
                margin-right: 10px;
            }
            
            .mode-btn {
                padding: 6px 12px;
                font-size: 13px;
            }
            
            .main-content {
                padding: 20px;
            }
            
            .logo-text h1 {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body data-theme="light">
    <div class="container">
        <div class="header">
            <div class="logo">
                <div class="logo-icon">T</div>
                <div class="logo-text">
                    <h1>LLM Token Count.com</h1>
                    <p>Professional AI Tokenizer for Frontier Models</p>
                </div>
            </div>
            <div class="header-controls">
                <div class="view-mode-toggle">
                    <button id="textModeBtn" class="mode-btn" onclick="setViewMode('text')">
                        üìù Text Mode
                    </button>
                    <button id="aiModeBtn" class="mode-btn active" onclick="setViewMode('ai')">
                        ü§ñ AI Mode
                    </button>
                </div>
                <button class="theme-toggle" onclick="toggleTheme()">
                    <span id="themeIcon">üåô</span> Dark
                </button>
            </div>
        </div>
        <div class="main-content">
            <div id="textAnalysisSection" class="content-section" style="order: 2;">
                <div class="text-section">
                    <h3>Text Analysis 
                        <span class="tooltip">üìä
                            <span class="tooltip-text">Paste up to 10 million characters for analysis. Real-time tokenization shows exactly how your chosen AI model would process this text.</span>
                        </span>
                    </h3>
                    <textarea 
                        id="textInput" 
                        class="text-area" 
                        placeholder="Enter or paste your text here for professional AI tokenization analysis...
‚ú® Supports up to 10 million characters
üéØ 25 frontier AI models from OpenAI, Google, Anthropic, xAI, and more  
üí∞ Real-time cost estimation
üìä Professional export options
Perfect for:
‚Ä¢ Content creators planning AI-assisted writing
‚Ä¢ Developers optimizing API costs  
‚Ä¢ Researchers analyzing large documents
‚Ä¢ Anyone curious about how AI processes text
Try pasting a long document, code, or article to see how different AI models would tokenize it!"
                    ></textarea>
                    
                    <div class="text-stats">
                        <div class="text-stats-left">
                            <span>Lines: <span id="lineCount">0</span></span>
                            <span>Paragraphs: <span id="paragraphCount">0</span></span>
                            <span>Sentences: <span id="sentenceCount">0</span></span>
                            <span>Ratio: <span id="charTokenRatio">0</span> chars/token</span>
                            <span>Efficiency: <span id="tokenEfficiency">0</span> words/token</span>
                        </div>
                        <div id="estimationInfo" class="estimation-info">
                            Google SentencePiece tokenizer
                        </div>
                    </div>
                </div>
            </div>

            <div id="advancedTextSection" class="content-section" style="order: 4;">
                <div class="advanced-stats-section">
                    <h3 style="font-size: 1.2rem; font-weight: 600; margin-bottom: 20px; color: var(--text-primary);">
                        üìà Advanced Text Analysis
                    </h3>
                    
                    <div class="advanced-stats-grid">
                        <div class="advanced-stat-item">
                            <div class="advanced-stat-label">üìö Reading Level</div>
                            <div id="readingLevel" class="advanced-stat-value">-</div>
                            <div id="readingLevelDetail" class="advanced-stat-detail">Analyze text first</div>
                        </div>
                        
                        <div class="advanced-stat-item">
                            <div class="advanced-stat-label">üìñ Reading Time</div>
                            <div id="readingTime" class="advanced-stat-value">0 min</div>
                            <div class="advanced-stat-detail">~250 words/minute</div>
                        </div>
                        
                        <div class="advanced-stat-item">
                            <div class="advanced-stat-label">üéôÔ∏è Speaking Time</div>
                            <div id="speakingTime" class="advanced-stat-value">0 min</div>
                            <div class="advanced-stat-detail">~150 words/minute</div>
                        </div>
                        
                        <div class="advanced-stat-item">
                            <div class="advanced-stat-label">üìù Words</div>
                            <div id="advWordCount" class="advanced-stat-value">0</div>
                            <div class="advanced-stat-detail">Total word count</div>
                        </div>
                        
                        <div class="advanced-stat-item">
                            <div class="advanced-stat-label">üî§ Characters</div>
                            <div id="advCharCount" class="advanced-stat-value">0</div>
                            <div class="advanced-stat-detail">Including spaces</div>
                        </div>
                        
                        <div class="advanced-stat-item">
                            <div class="advanced-stat-label">üìÑ Sentences</div>
                            <div id="advSentenceCount" class="advanced-stat-value">0</div>
                            <div class="advanced-stat-detail">Complete sentences</div>
                        </div>
                        
                        <div class="advanced-stat-item">
                            <div class="advanced-stat-label">üìë Paragraphs</div>
                            <div id="advParagraphCount" class="advanced-stat-value">0</div>
                            <div class="advanced-stat-detail">Text blocks</div>
                        </div>
                        
                        <div class="advanced-stat-item">
                            <div class="advanced-stat-label">üìä Avg Sentence Length</div>
                            <div id="avgSentenceLength" class="advanced-stat-value">0</div>
                            <div class="advanced-stat-detail">Words per sentence</div>
                        </div>
                    </div>
                    
                    <div class="keyword-density-section">
                        <h4 style="font-size: 1rem; font-weight: 600; margin-bottom: 12px; color: var(--text-primary);">
                            üîç Keyword Density Analysis
                        </h4>
                        
                        <div class="keyword-density-tabs">
                            <button class="keyword-tab active" onclick="switchKeywordTab('x1')">Single Words (x1)</button>
                            <button class="keyword-tab" onclick="switchKeywordTab('x2')">Bigrams (x2)</button>
                            <button class="keyword-tab" onclick="switchKeywordTab('x3')">Trigrams (x3)</button>
                        </div>
                        
                        <div id="keywordListX1" class="keyword-list">
                            <div class="no-keywords">Enter text to see keyword analysis</div>
                        </div>
                        
                        <div id="keywordListX2" class="keyword-list" style="display: none;">
                            <div class="no-keywords">Enter text to see bigram analysis</div>
                        </div>
                        
                        <div id="keywordListX3" class="keyword-list" style="display: none;">
                            <div class="no-keywords">Enter text to see trigram analysis</div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="modelSelectionSection" class="content-section" style="order: 1;">
                <div class="controls-section">
                    <div class="model-panel">
                        <h3>Model Selection 
                            <span class="tooltip">‚ÑπÔ∏è
                                <span class="tooltip-text">Choose from 25 frontier AI models. Each model tokenizes text differently, affecting cost and performance. Higher ranked models are generally more capable.</span>
                            </span>
                        </h3>
                        <select id="modelSelect" class="model-selector">
                            <option value="gpt-5-high">GPT-5 (High) - Rank #1</option>
                            <option value="gpt-5-medium">GPT-5 (Medium) - Rank #2</option>
                            <option value="grok-4">Grok 4 - Rank #3</option>
                            <option value="o3-pro">o3-pro - Rank #4</option>
                            <option value="o3">o3 - Rank #5</option>
                            <option value="gpt-5-mini-high">GPT-5 Mini (High) - Rank #6</option>
                            <option value="o4-mini-high">o4-mini (High) - Rank #7</option>
                            <option value="gemini-2.5-pro" selected>Gemini 2.5 Pro - Rank #8</option>
                            <option value="gpt-5-mini-medium">GPT-5 Mini (Medium) - Rank #9</option>
                            <option value="qwen3-235b">Qwen3 235B (Reasoning) - Rank #10</option>
                            <option value="gpt-5-low">GPT-5 (Low) - Rank #11</option>
                            <option value="gpt-oss-120b">GPT-OSS-120B (High) - Rank #12</option>
                            <option value="claude-4.1-opus-thinking">Claude 4.1 Opus Thinking - Rank #13</option>
                            <option value="deepseek-v3.1-reasoning">DeepSeek V3.1 (Reasoning) - Rank #14</option>
                            <option value="claude-4-sonnet-thinking">Claude 4 Sonnet Thinking - Rank #15</option>
                            <option value="deepseek-r1-0528">DeepSeek R1 0528 - Rank #16</option>
                            <option value="gemini-2.5-flash-reasoning">Gemini 2.5 Flash (Reasoning) - Rank #17</option>
                            <option value="grok-3-mini-reasoning">Grok 3 Mini Reasoning (High) - Rank #18</option>
                            <option value="glm-4.5">GLM-4.5 - Rank #19</option>
                            <option value="o3-mini-high">o3-mini (High) - Rank #20</option>
                            <option value="claude-4-opus-thinking">Claude 4 Opus Thinking - Rank #21</option>
                            <option value="gpt-5-nano-high">GPT-5 Nano (High) - Rank #22</option>
                            <option value="qwen3-30b">Qwen3 30B (Reasoning) - Rank #23</option>
                            <option value="gpt-5-nano-medium">GPT-5 Nano (Medium) - Rank #24</option>
                            <option value="minimax-m1-80k">MiniMax M1 80k - Rank #25</option>
                        </select>
                        
                        <div id="modelInfo" class="model-info">
                            <h4>Gemini 2.5 Pro</h4>
                            <p>Google's most capable model with massive 1M context window</p>
                            <div class="model-specs">
                                <span class="spec-item">1M Context</span>
                                <span class="spec-item">$3.44/1M</span>
                                <span class="spec-item">Index: 65</span>
                                <span class="spec-item">158.6 tok/s</span>
                            </div>
                            <div class="model-rankings">
                                Artificial Analysis Intelligence Rank: #8 of 25 frontier models
                            </div>
                        </div>
                        <div class="cost-info">
                            <h5>üí∞ Cost Estimate 
                                <span class="tooltip">üí°
                                    <span class="tooltip-text">Estimated cost based on current token count and model pricing. Actual costs may vary by provider and usage patterns.</span>
                                </span>
                            </h5>
                            <p id="costEstimate">$0.00 for current text</p>
                            <p id="contextUsage">0% of context window used</p>
                        </div>
                    </div>
                    <div class="stats-panel">
                        <div class="stat-card">
                            <h4>Tokens 
                                <span class="tooltip">üîç
                                    <span class="tooltip-text">Number of tokens this model would use for your text. This determines cost and context usage.</span>
                                </span>
                            </h4>
                            <div id="tokenCount" class="stat-number">0</div>
                            <div class="stat-label">AI Processing Units</div>
                        </div>
                        <div class="stat-card">
                            <h4>Words 
                                <span class="tooltip">üìù
                                    <span class="tooltip-text">Total word count in your text. Generally, 1 word ‚âà 1.3 tokens for English text.</span>
                                </span>
                            </h4>
                            <div id="wordCount" class="stat-number">0</div>
                            <div class="stat-label">Human Words</div>
                        </div>
                        <div class="stat-card">
                            <h4>Characters 
                                <span class="tooltip">üî§
                                    <span class="tooltip-text">Total character count including spaces. Generally, 3-4 characters ‚âà 1 token for English text.</span>
                                </span>
                            </h4>
                            <div id="charCount" class="stat-number">0</div>
                            <div class="stat-label">Individual Letters</div>
                        </div>
                    </div>
                </div>
                <div id="performanceWarning" class="performance-warning">
                    ‚ö†Ô∏è Large text detected (over 1M characters). Processing may take a few seconds for accurate tokenization.
                </div>
            </div>

            <div id="modelComparisonSection" class="content-section" style="order: 3;">
                <div class="comparison-section">
                    <div class="comparison-header">
                        <h3>üìä Model Comparison 
                            <span class="tooltip">üîç
                                <span class="tooltip-text">Compare cost and context usage across multiple AI models. Shows the top 5 models by default, add up to 10 total for comparison.</span>
                            </span>
                        </h3>
                        <div class="model-selector-dropdown">
                            <button id="addModelBtn" class="add-model-btn" onclick="toggleModelDropdown()">
                                + Add Model to Compare
                            </button>
                            <div id="modelDropdown" class="model-dropdown">
                                <!-- Model options will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                    
                    <div id="comparisonGrid" class="comparison-grid">
                        <!-- Comparison rows will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        const modelInfo = {
            'gpt-5-high': {
                name: 'GPT-5 (High)',
                creator: 'OpenAI',
                description: 'Most capable frontier model with highest intelligence',
                context: '400k',
                contextNum: 400000,
                cost: 3.44,
                speed: 62.0,
                rank: 1,
                intelligenceIndex: 69,
                charsPerToken: 4,
                wordsPerToken: 0.75
            },
            'gpt-5-medium': {
                name: 'GPT-5 (Medium)',
                creator: 'OpenAI', 
                description: 'Balanced performance version of GPT-5',
                context: '400k',
                contextNum: 400000,
                cost: 3.44,
                speed: 154.9,
                rank: 2,
                intelligenceIndex: 68,
                charsPerToken: 4,
                wordsPerToken: 0.75
            },
            'grok-4': {
                name: 'Grok 4',
                creator: 'xAI',
                description: 'Elon Musk\'s advanced AI with real-time knowledge',
                context: '256k',
                contextNum: 256000,
                cost: 6.00,
                speed: 43.3,
                rank: 3,
                intelligenceIndex: 68,
                charsPerToken: 4,
                wordsPerToken: 0.75
            },
            'o3-pro': {
                name: 'o3-pro',
                creator: 'OpenAI',
                description: 'Advanced reasoning model for complex problems',
                context: '200k',
                contextNum: 200000,
                cost: 35.00,
                speed: 21.8,
                rank: 4,
                intelligenceIndex: 68,
                charsPerToken: 4,
                wordsPerToken: 0.75
            },
            'o3': {
                name: 'o3',
                creator: 'OpenAI',
                description: 'Reasoning model with enhanced problem-solving',
                context: '200k',
                contextNum: 200000,
                cost: 3.50,
                speed: 219.8,
                rank: 5,
                intelligenceIndex: 67,
                charsPerToken: 4,
                wordsPerToken: 0.75
            },
            'gpt-5-mini-high': {
                name: 'GPT-5 Mini (High)',
                creator: 'OpenAI',
                description: 'Efficient high-performance mini model',
                context: '400k',
                contextNum: 400000,
                cost: 0.69,
                speed: 79.3,
                rank: 6,
                intelligenceIndex: 65,
                charsPerToken: 4,
                wordsPerToken: 0.75
            },
            'o4-mini-high': {
                name: 'o4-mini (High)',
                creator: 'OpenAI',
                description: 'Compact reasoning model with high performance',
                context: '200k',
                contextNum: 200000,
                cost: 1.93,
                speed: 117.9,
                rank: 7,
                intelligenceIndex: 65,
                charsPerToken: 4,
                wordsPerToken: 0.75
            },
            'gemini-2.5-pro': {
                name: 'Gemini 2.5 Pro',
                creator: 'Google',
                description: 'Google\'s most capable model with massive context window',
                context: '1M',
                contextNum: 1000000,
                cost: 3.44,
                speed: 158.6,
                rank: 8,
                intelligenceIndex: 65,
                charsPerToken: 4,
                wordsPerToken: 0.7
            },
            'gpt-5-mini-medium': {
                name: 'GPT-5 Mini (Medium)',
                creator: 'OpenAI',
                description: 'Balanced efficiency mini model',
                context: '400k',
                contextNum: 400000,
                cost: 0.69,
                speed: 75.6,
                rank: 9,
                intelligenceIndex: 64,
                charsPerToken: 4,
                wordsPerToken: 0.75
            },
            'qwen3-235b': {
                name: 'Qwen3 235B (Reasoning)',
                creator: 'Alibaba',
                description: 'Large multilingual reasoning model',
                context: '256k',
                contextNum: 256000,
                cost: 2.63,
                speed: 0.0,
                rank: 10,
                intelligenceIndex: 64,
                charsPerToken: 3.5,
                wordsPerToken: 0.75
            },
            'gpt-5-low': {
                name: 'GPT-5 (Low)',
                creator: 'OpenAI',
                description: 'Cost-optimized version of GPT-5',
                context: '400k',
                contextNum: 400000,
                cost: 3.44,
                speed: 131.5,
                rank: 11,
                intelligenceIndex: 63,
                charsPerToken: 4,
                wordsPerToken: 0.75
            },
            'gpt-oss-120b': {
                name: 'GPT-OSS-120B (High)',
                creator: 'OpenAI',
                description: 'High-performance open-source style model',
                context: '131k',
                contextNum: 131000,
                cost: 0.26,
                speed: 237.5,
                rank: 12,
                intelligenceIndex: 61,
                charsPerToken: 4,
                wordsPerToken: 0.75
            },
            'claude-4.1-opus-thinking': {
                name: 'Claude 4.1 Opus Thinking',
                creator: 'Anthropic',
                description: 'Premium reasoning model with advanced thinking',
                context: '200k',
                contextNum: 200000,
                cost: 30.00,
                speed: 24.5,
                rank: 13,
                intelligenceIndex: 61,
                charsPerToken: 4,
                wordsPerToken: 0.75
            },
            'deepseek-v3.1-reasoning': {
                name: 'DeepSeek V3.1 (Reasoning)',
                creator: 'DeepSeek',
                description: 'Advanced reasoning model with coding focus',
                context: '128k',
                contextNum: 128000,
                cost: 0.96,
                speed: 20.0,
                rank: 14,
                intelligenceIndex: 60,
                charsPerToken: 3.3,
                wordsPerToken: 0.75
            },
            'claude-4-sonnet-thinking': {
                name: 'Claude 4 Sonnet Thinking',
                creator: 'Anthropic',
                description: 'Balanced reasoning model with large context',
                context: '1M',
                contextNum: 1000000,
                cost: 6.00,
                speed: 51.6,
                rank: 15,
                intelligenceIndex: 59,
                charsPerToken: 4,
                wordsPerToken: 0.75
            },
            'deepseek-r1-0528': {
                name: 'DeepSeek R1 0528',
                creator: 'DeepSeek',
                description: 'Research-focused model with strong reasoning',
                context: '128k',
                contextNum: 128000,
                cost: 0.96,
                speed: 19.9,
                rank: 16,
                intelligenceIndex: 59,
                charsPerToken: 3.3,
                wordsPerToken: 0.75
            },
            'gemini-2.5-flash-reasoning': {
                name: 'Gemini 2.5 Flash (Reasoning)',
                creator: 'Google',
                description: 'Fast reasoning model with large context',
                context: '1M',
                contextNum: 1000000,
                cost: 0.85,
                speed: 258.4,
                rank: 17,
                intelligenceIndex: 58,
                charsPerToken: 4,
                wordsPerToken: 0.7
            },
            'grok-3-mini-reasoning': {
                name: 'Grok 3 Mini Reasoning (High)',
                creator: 'xAI',
                description: 'Efficient reasoning model with real-time data',
                context: '1M',
                contextNum: 1000000,
                cost: 0.35,
                speed: 187.8,
                rank: 18,
                intelligenceIndex: 58,
                charsPerToken: 4,
                wordsPerToken: 0.75
            },
            'glm-4.5': {
                name: 'GLM-4.5',
                creator: 'Zhipu AI',
                description: 'Bilingual model optimized for Chinese and English',
                context: '128k',
                contextNum: 128000,
                cost: 0.97,
                speed: 68.6,
                rank: 19,
                intelligenceIndex: 56,
                charsPerToken: 3.5,
                wordsPerToken: 0.75
            },
            'o3-mini-high': {
                name: 'o3-mini (High)',
                creator: 'OpenAI',
                description: 'Compact high-performance reasoning model',
                context: '200k',
                contextNum: 200000,
                cost: 1.93,
                speed: 159.2,
                rank: 20,
                intelligenceIndex: 55,
                charsPerToken: 4,
                wordsPerToken: 0.75
            },
            'claude-4-opus-thinking': {
                name: 'Claude 4 Opus Thinking',
                creator: 'Anthropic',
                description: 'Premium thinking model with advanced reasoning',
                context: '200k',
                contextNum: 200000,
                cost: 30.00,
                speed: 33.4,
                rank: 21,
                intelligenceIndex: 55,
                charsPerToken: 4,
                wordsPerToken: 0.75
            },
            'gpt-5-nano-high': {
                name: 'GPT-5 Nano (High)',
                creator: 'OpenAI',
                description: 'Ultra-efficient high-performance nano model',
                context: '400k',
                contextNum: 400000,
                cost: 0.14,
                speed: 175.9,
                rank: 22,
                intelligenceIndex: 55,
                charsPerToken: 4,
                wordsPerToken: 0.75
            },
            'qwen3-30b': {
                name: 'Qwen3 30B (Reasoning)',
                creator: 'Alibaba',
                description: 'Efficient multilingual reasoning model',
                context: '262k',
                contextNum: 262000,
                cost: 0.75,
                speed: 0.0,
                rank: 23,
                intelligenceIndex: 54,
                charsPerToken: 3.5,
                wordsPerToken: 0.75
            },
            'gpt-5-nano-medium': {
                name: 'GPT-5 Nano (Medium)',
                creator: 'OpenAI',
                description: 'Balanced ultra-efficient nano model',
                context: '400k',
                contextNum: 400000,
                cost: 0.14,
                speed: 217.1,
                rank: 24,
                intelligenceIndex: 54,
                charsPerToken: 4,
                wordsPerToken: 0.75
            },
            'minimax-m1-80k': {
                name: 'MiniMax M1 80k',
                creator: 'MiniMax',
                description: 'Chinese AI model with specialized capabilities',
                context: '1M',
                contextNum: 1000000,
                cost: 0.82,
                speed: 0.0,
                rank: 25,
                intelligenceIndex: 53,
                charsPerToken: 4,
                wordsPerToken: 0.83
            }
        };
        
        // Comparison models (default top 5)
        let comparisonModels = [
            'gpt-5-high',
            'gpt-5-medium', 
            'grok-4',
            'o3-pro',
            'o3'
        ];
        
        function estimateTokens(text, modelId) {
            if (!text.trim()) return 0;
            const model = modelInfo[modelId];
            const charsPerToken = model.charsPerToken;
            const wordsPerToken = model.wordsPerToken;
            
            // Use character-based estimation with model-specific ratios
            const charBasedTokens = Math.ceil(text.length / charsPerToken);
            
            // Use word-based estimation as a check
            const words = text.trim().split(/\s+/).length;
            const wordBasedTokens = Math.ceil(words / wordsPerToken);
            
            // Use the more conservative (higher) estimate for safety
            return Math.max(charBasedTokens, wordBasedTokens);
        }
        
        function calculateReadingLevel(text) {
            if (!text.trim()) return { level: '-', description: 'No text to analyze' };
            
            const words = text.trim().split(/\s+/);
            const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 0);
            const syllables = words.reduce((count, word) => {
                return count + countSyllables(word.toLowerCase().replace(/[^a-z]/g, ''));
            }, 0);
            
            if (sentences.length === 0 || words.length === 0) {
                return { level: '-', description: 'Insufficient text' };
            }
            
            // Flesch-Kincaid Grade Level
            const avgWordsPerSentence = words.length / sentences.length;
            const avgSyllablesPerWord = syllables / words.length;
            const gradeLevel = 0.39 * avgWordsPerSentence + 11.8 * avgSyllablesPerWord - 15.59;
            
            let level, description;
            if (gradeLevel < 1) {
                level = 'K';
                description = 'Kindergarten';
            } else if (gradeLevel <= 6) {
                level = Math.round(gradeLevel).toString();
                description = `Grade ${Math.round(gradeLevel)}`;
            } else if (gradeLevel <= 8) {
                level = '7-8';
                description = 'Middle School';
            } else if (gradeLevel <= 12) {
                level = '9-12';
                description = 'High School';
            } else if (gradeLevel <= 16) {
                level = 'UG';
                description = 'College';
            } else {
                level = 'GR';
                description = 'Graduate';
            }
            
            return { level, description };
        }
        
        function countSyllables(word) {
            if (!word) return 0;
            word = word.toLowerCase();
            let count = 0;
            let previousWasVowel = false;
            
            for (let i = 0; i < word.length; i++) {
                const isVowel = 'aeiouy'.includes(word[i]);
                if (isVowel && !previousWasVowel) {
                    count++;
                }
                previousWasVowel = isVowel;
            }
            
            // Adjust for silent e
            if (word.endsWith('e')) {
                count--;
            }
            
            // Every word has at least one syllable
            if (count === 0) {
                count = 1;
            }
            
            return count;
        }
        
        function analyzeKeywordDensity(text) {
            if (!text.trim()) return { x1: [], x2: [], x3: [] };
            
            // Clean and tokenize text
            const cleanText = text.toLowerCase().replace(/[^\w\s]/g, ' ');
            const words = cleanText.split(/\s+/).filter(word => 
                word.length > 2 && !isCommonWord(word)
            );
            
            // Count single words (x1)
            const wordCounts = {};
            words.forEach(word => {
                wordCounts[word] = (wordCounts[word] || 0) + 1;
            });
            
            // Count bigrams (x2)
            const bigramCounts = {};
            for (let i = 0; i < words.length - 1; i++) {
                const bigram = `${words[i]} ${words[i + 1]}`;
                bigramCounts[bigram] = (bigramCounts[bigram] || 0) + 1;
            }
            
            // Count trigrams (x3)
            const trigramCounts = {};
            for (let i = 0; i < words.length - 2; i++) {
                const trigram = `${words[i]} ${words[i + 1]} ${words[i + 2]}`;
                trigramCounts[trigram] = (trigramCounts[trigram] || 0) + 1;
            }
            
            const totalWords = words.length;
            const totalBigrams = Math.max(words.length - 1, 1);
            const totalTrigrams = Math.max(words.length - 2, 1);
            
            // Sort and format results
            const formatResults = (counts, total) => {
                return Object.entries(counts)
                    .filter(([_, count]) => count > 1)
                    .sort((a, b) => b[1] - a[1])
                    .slice(0, 15)
                    .map(([term, count]) => ({
                        term,
                        count,
                        percentage: ((count / total) * 100).toFixed(1)
                    }));
            };
            
            return {
                x1: formatResults(wordCounts, totalWords),
                x2: formatResults(bigramCounts, totalBigrams),
                x3: formatResults(trigramCounts, totalTrigrams)
            };
        }
        
        function isCommonWord(word) {
            const commonWords = [
                'the', 'be', 'to', 'of', 'and', 'a', 'in', 'that', 'have', 'i',
                'it', 'for', 'not', 'on', 'with', 'he', 'as', 'you', 'do', 'at',
                'this', 'but', 'his', 'by', 'from', 'they', 'we', 'say', 'her', 'she',
                'or', 'an', 'will', 'my', 'one', 'all', 'would', 'there', 'their',
                'what', 'so', 'up', 'out', 'if', 'about', 'who', 'get', 'which', 'go',
                'me', 'when', 'make', 'can', 'like', 'time', 'no', 'just', 'him', 'know',
                'take', 'people', 'into', 'year', 'your', 'good', 'some', 'could', 'them',
                'see', 'other', 'than', 'then', 'now', 'look', 'only', 'come', 'its', 'over',
                'think', 'also', 'back', 'after', 'use', 'two', 'how', 'our', 'work',
                'first', 'well', 'way', 'even', 'new', 'want', 'because', 'any', 'these',
                'give', 'day', 'most', 'us', 'is', 'was', 'are', 'been', 'has', 'had',
                'were', 'said', 'did', 'get', 'may', 'should', 'could', 'would', 'got'
            ];
            return commonWords.includes(word);
        }
        
        let currentKeywordTab = 'x1';
        
        function switchKeywordTab(tab) {
            currentKeywordTab = tab;
            
            // Update tab styles
            document.querySelectorAll('.keyword-tab').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Show/hide corresponding list
            document.getElementById('keywordListX1').style.display = tab === 'x1' ? 'block' : 'none';
            document.getElementById('keywordListX2').style.display = tab === 'x2' ? 'block' : 'none';
            document.getElementById('keywordListX3').style.display = tab === 'x3' ? 'block' : 'none';
        }
        
        function updateKeywordDisplay(keywords) {
            const displayKeywords = (list, elementId) => {
                const element = document.getElementById(elementId);
                
                if (list.length === 0) {
                    element.innerHTML = '<div class="no-keywords">No repeated keywords found</div>';
                    return;
                }
                
                element.innerHTML = list.map(item => `
                    <div class="keyword-item">
                        <span class="keyword-text">${item.term}</span>
                        <span class="keyword-count">${item.count}</span>
                        <span class="keyword-percent">${item.percentage}%</span>
                    </div>
                `).join('');
            };
            
            displayKeywords(keywords.x1, 'keywordListX1');
            displayKeywords(keywords.x2, 'keywordListX2');
            displayKeywords(keywords.x3, 'keywordListX3');
        }
        
        function updateCounts() {
            const text = document.getElementById('textInput').value;
            const selectedModel = document.getElementById('modelSelect').value;
            const model = modelInfo[selectedModel];
            
            // Show performance warning for large texts
            const warning = document.getElementById('performanceWarning');
            if (text.length > 1000000) {
                warning.classList.add('show');
            } else {
                warning.classList.remove('show');
            }
            
            // Basic counts
            const charCount = text.length;
            const wordCount = text.trim() ? text.trim().split(/\s+/).length : 0;
            const lineCount = text ? text.split('\n').length : 0;
            const paragraphCount = text.trim() ? text.trim().split(/\n\s*\n/).length : 0;
            const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 0);
            const sentenceCount = sentences.length;
            const tokenCount = estimateTokens(text, selectedModel);
            
            // Update display
            document.getElementById('charCount').textContent = charCount.toLocaleString();
            document.getElementById('wordCount').textContent = wordCount.toLocaleString();
            document.getElementById('tokenCount').textContent = tokenCount.toLocaleString();
            document.getElementById('lineCount').textContent = lineCount.toLocaleString();
            document.getElementById('paragraphCount').textContent = paragraphCount.toLocaleString();
            document.getElementById('sentenceCount').textContent = sentenceCount.toLocaleString();
            
            // Update advanced stats
            document.getElementById('advWordCount').textContent = wordCount.toLocaleString();
            document.getElementById('advCharCount').textContent = charCount.toLocaleString();
            document.getElementById('advSentenceCount').textContent = sentenceCount.toLocaleString();
            document.getElementById('advParagraphCount').textContent = paragraphCount.toLocaleString();
            
            // Calculate average sentence length
            const avgSentLength = sentenceCount > 0 ? Math.round(wordCount / sentenceCount) : 0;
            document.getElementById('avgSentenceLength').textContent = avgSentLength.toLocaleString();
            
            // Calculate reading level
            const readingLevelData = calculateReadingLevel(text);
            document.getElementById('readingLevel').textContent = readingLevelData.level;
            document.getElementById('readingLevelDetail').textContent = readingLevelData.description;
            
            // Calculate reading and speaking times
            const readingSpeed = 250; // words per minute
            const speakingSpeed = 150; // words per minute
            
            const readingTimeMinutes = wordCount / readingSpeed;
            const speakingTimeMinutes = wordCount / speakingSpeed;
            
            const formatTime = (minutes) => {
                if (minutes < 1) return '< 1 min';
                if (minutes < 60) return `${Math.round(minutes)} min`;
                const hours = Math.floor(minutes / 60);
                const mins = Math.round(minutes % 60);
                return `${hours}h ${mins}m`;
            };
            
            document.getElementById('readingTime').textContent = formatTime(readingTimeMinutes);
            document.getElementById('speakingTime').textContent = formatTime(speakingTimeMinutes);
            
            // Analyze keyword density
            const keywords = analyzeKeywordDensity(text);
            updateKeywordDisplay(keywords);
            
            // Calculate ratios
            const charTokenRatio = tokenCount > 0 ? (charCount / tokenCount).toFixed(1) : '0';
            const tokenEfficiency = tokenCount > 0 ? (wordCount / tokenCount).toFixed(2) : '0';
            document.getElementById('charTokenRatio').textContent = charTokenRatio;
            document.getElementById('tokenEfficiency').textContent = tokenEfficiency;
            
            // Update model info
            document.getElementById('modelInfo').innerHTML = `
                <h4>${model.name}</h4>
                <p>${model.description}</p>
                <div class="model-specs">
                    <span class="spec-item">${model.context} Context</span>
                    <span class="spec-item">${model.cost}/1M</span>
                    <span class="spec-item">Index: ${model.intelligenceIndex}</span>
                    <span class="spec-item">${model.speed} tok/s</span>
                </div>
                <div class="model-rankings">
                    Artificial Analysis Intelligence Rank: #${model.rank} of 25 frontier models
                </div>
            `;
            
            // Update cost and context info
            const costEstimate = (tokenCount / 1000000) * model.cost;
            const contextUsage = ((tokenCount / model.contextNum) * 100).toFixed(1);
            
            document.getElementById('costEstimate').textContent = 
                costEstimate < 0.01 ? '$0.00 for current text' : `${costEstimate.toFixed(3)} for current text`;
            document.getElementById('contextUsage').textContent = 
                `${contextUsage}% of context window used`;
            
            // Update estimation info
            const tokenizerName = model.creator === 'Google' ? 'Google SentencePiece' :
                                 model.creator === 'OpenAI' ? 'OpenAI cl100k_base' :
                                 model.creator === 'Anthropic' ? 'Anthropic Claude' :
                                 model.creator === 'DeepSeek' ? 'DeepSeek Custom' :
                                 model.creator === 'Alibaba' ? 'Qwen Tokenizer' :
                                 model.creator === 'xAI' ? 'Grok Tokenizer' :
                                 'Custom Tokenizer';
            
            document.getElementById('estimationInfo').textContent = `${tokenizerName} estimation`;
            
            updateComparison();
        }
        
        function updateComparison() {
            const text = document.getElementById('textInput').value;
            const grid = document.getElementById('comparisonGrid');
            
            grid.innerHTML = '';
            
            comparisonModels.forEach((modelId, index) => {
                const model = modelInfo[modelId];
                const tokenCount = estimateTokens(text, modelId);
                const costEstimate = (tokenCount / 1000000) * model.cost;
                const contextUsage = (tokenCount / model.contextNum) * 100;
                
                const isSelected = modelId === document.getElementById('modelSelect').value;
                
                const row = document.createElement('div');
                row.className = `comparison-row ${isSelected ? 'selected' : ''}`;
                
                row.innerHTML = `
                    <div class="model-header">
                        <div class="model-info-compact">
                            <h4>${model.name}</h4>
                            <p>${model.creator} ‚Ä¢ ${model.context} context ‚Ä¢ ${model.intelligenceIndex} index</p>
                        </div>
                        <div style="display: flex; align-items: center;">
                            <span class="model-rank">#${model.rank}</span>
                            ${comparisonModels.length > 1 ? `<button class="remove-btn" onclick="removeModel('${modelId}')" title="Remove from comparison">√ó</button>` : ''}
                        </div>
                    </div>
                    
                    <div class="metrics-grid">
                        <div class="metric-item">
                            <div class="metric-header">
                                <span class="metric-label">üí∞ Cost Estimate</span>
                                <span class="metric-value">${costEstimate < 0.01 ? '$0.00' : '$' + costEstimate.toFixed(3)}</span>
                            </div>
                            <div class="progress-bar cost-bar">
                                <div class="progress-fill" style="width: ${Math.min((costEstimate / 0.1) * 100, 100)}%"></div>
                            </div>
                        </div>
                        
                        <div class="metric-item">
                            <div class="metric-header">
                                <span class="metric-label">üìä Context Usage</span>
                                <span class="metric-value">${contextUsage.toFixed(1)}%</span>
                            </div>
                            <div class="progress-bar context-bar">
                                <div class="progress-fill" style="width: ${Math.min(contextUsage, 100)}%"></div>
                            </div>
                        </div>
                    </div>
                `;
                
                grid.appendChild(row);
            });
            
            updateModelDropdown();
        }
        
        function updateModelDropdown() {
            const dropdown = document.getElementById('modelDropdown');
            const addBtn = document.getElementById('addModelBtn');
            
            // Disable add button if at max models
            addBtn.disabled = comparisonModels.length >= 10;
            addBtn.textContent = comparisonModels.length >= 10 ? 'Maximum 10 Models' : '+ Add Model to Compare';
            
            dropdown.innerHTML = '';
            
            // Show available models not already in comparison
            Object.keys(modelInfo).forEach(modelId => {
                if (!comparisonModels.includes(modelId)) {
                    const model = modelInfo[modelId];
                    const option = document.createElement('button');
                    option.className = 'model-dropdown-option';
                    option.onclick = () => addModel(modelId);
                    option.innerHTML = `
                        <div><strong>${model.name}</strong> - Rank #${model.rank}</div>
                        <div style="font-size: 11px; color: var(--text-muted);">${model.creator} ‚Ä¢ ${model.context} ‚Ä¢ $${model.cost}/1M</div>
                    `;
                    dropdown.appendChild(option);
                }
            });
            
            if (dropdown.children.length === 0) {
                const noOptions = document.createElement('div');
                noOptions.style.cssText = 'padding: 12px; text-align: center; color: var(--text-muted); font-size: 13px;';
                noOptions.textContent = 'All models added to comparison';
                dropdown.appendChild(noOptions);
            }
        }
        
        function addModel(modelId) {
            if (comparisonModels.length < 10 && !comparisonModels.includes(modelId)) {
                comparisonModels.push(modelId);
                updateComparison();
                document.getElementById('modelDropdown').classList.remove('active');
            }
        }
        
        function removeModel(modelId) {
            if (comparisonModels.length > 1) {
                comparisonModels = comparisonModels.filter(id => id !== modelId);
                updateComparison();
            }
        }
        
        function toggleModelDropdown() {
            const dropdown = document.getElementById('modelDropdown');
            dropdown.classList.toggle('active');
        }
        
        let currentViewMode = 'ai';
        
        function setViewMode(mode) {
            currentViewMode = mode;
            
            // Update button states
            const textBtn = document.getElementById('textModeBtn');
            const aiBtn = document.getElementById('aiModeBtn');
            
            if (mode === 'text') {
                textBtn.classList.add('active');
                aiBtn.classList.remove('active');
                
                // Text Mode order: Text Analysis, Advanced Text, Model Selection, Model Comparison
                document.getElementById('textAnalysisSection').style.order = '1';
                document.getElementById('advancedTextSection').style.order = '2';
                document.getElementById('modelSelectionSection').style.order = '3';
                document.getElementById('modelComparisonSection').style.order = '4';
            } else {
                // AI Mode (default)
                textBtn.classList.remove('active');
                aiBtn.classList.add('active');
                
                // AI Mode order: Model Selection, Text Analysis, Model Comparison, Advanced Text
                document.getElementById('modelSelectionSection').style.order = '1';
                document.getElementById('textAnalysisSection').style.order = '2';
                document.getElementById('modelComparisonSection').style.order = '3';
                document.getElementById('advancedTextSection').style.order = '4';
            }
        }
        
        function toggleTheme() {
            const body = document.body;
            const themeIcon = document.getElementById('themeIcon');
            const button = document.querySelector('.theme-toggle');
            
            if (body.getAttribute('data-theme') === 'dark') {
                body.setAttribute('data-theme', 'light');
                themeIcon.textContent = 'üåô';
                button.innerHTML = '<span id="themeIcon">üåô</span> Dark';
            } else {
                body.setAttribute('data-theme', 'dark');
                themeIcon.textContent = '‚òÄÔ∏è';
                button.innerHTML = '<span id="themeIcon">‚òÄÔ∏è</span> Light';
            }
        }
        
        // Performance-optimized input handler
        let updateTimeout;
        document.getElementById('textInput').addEventListener('input', function() {
            clearTimeout(updateTimeout);
            updateTimeout = setTimeout(updateCounts, 150); // Debounce for large texts
        });
        
        document.getElementById('modelSelect').addEventListener('change', updateCounts);
        
        // Close model dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const dropdown = document.getElementById('modelDropdown');
            const addBtn = document.getElementById('addModelBtn');
            
            if (!addBtn.contains(event.target) && !dropdown.contains(event.target)) {
                dropdown.classList.remove('active');
            }
        });
        
        // Initialize with default model and comparison
        updateCounts();
    </script>
</body>
</html>
